<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">

	<meta name="viewport" content="width=device-width,height=device-height,user-scalable=no">

	<title>Asukara</title>
	<!-- スタイルシート -->
	<link rel="stylesheet" href="css/skyway_p2p.css">

	<!-- インクルード的な物たち -->
	<script type="text/javascript" src="inc/enchant.js"></script>
	<script type="text/javascript" src="inc/nowLoading.js"></script>
	<script type="text/javascript" src="inc/fullScreen.js"></script>

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"
		integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

	<!-- webフォント -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Vujahday+Script&display=swap" rel="stylesheet">
	<style>
		/* font-family: 'Noto Sans JP', sans-serif; */
		@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@700&display=swap');
	</style>

	<!-- スタイルシート(手抜き) -->
	<style type="text/css">
		body {
			margin: 0;
			padding: 0;
		}
	</style>

	<!-- MIDI音源の読み込み -->
	<!-- https://github.com/g200kg/webaudio-tinysynth -->
	<script src='https://g200kg.github.io/webaudio-tinysynth/webaudio-tinysynth.js'></script>

	<!-- MIDIデータ -->
	<!-- <script type="text/javascript" src="js/midi001.js"></script> -->
	<script type="text/javascript" src="js/midi014.js"></script>

	<!-- 画面単体 -->
	<script type="text/javascript" src="js/s010.js"></script>
	<script type="text/javascript" src="js/s020.js"></script>
	<script type="text/javascript" src="js/s030.js"></script>
	<script type="text/javascript" src="js/s040.js"></script>
	<script type="text/javascript" src="js/s090.js"></script>
	<script type="text/javascript" src="js/s100.js"></script>
	<script type="text/javascript" src="js/s200.js"></script>
	<script type="text/javascript" src="js/s300.js"></script>

	<!-- ゲーム本体 -->
	<script type="text/javascript" src="js/game.js"></script>

	<!-- MIDI音源の読み込み -->
	<script type="text/javascript">
		// var synth = new WebAudioTinySynth();
		var synth = new WebAudioTinySynth({ quality: 1, useReverb: 0, voices: 32 });

		// ch: 0, pg: 27 electro; guitter
		// synth.setProgram(0, 27);
		// synth.send([0xc0,27]);
		var timber = 26;
		synth.send([0xc0, timber]);

		function btnActhion(data) {
			document.getElementById("status").innerHTML = synth.getTimbreName(0, timber);

			synth.send(data);
		}
	</script>

	<script type="text/javascript">
		function launchGame() {
			goFullScreen();

			// 無名関数と遅延実行 n00ms(ミリ秒)
			// windowサイズが最大化直後で正しく取得できない対策
			window.setTimeout(function () {
				startGame();
			}, 500);

		}
	</script>
</head>

<body>
	<div>スマホの画面を横にして起動してください♪</div>
	<div><button type="button" id="btnFullscreen" onclick="launchGame();" accesskey="w">起動</button></div>
	<div id="enchant-stage"></div>
	<div>
		<hr />
		<footer>
			<p>&copy; 2021-2022 <a href="https://twitter.com/AshitaKaraage">明日、唐揚げを食べたい</a></p>
		</footer>
	</div>
	<div>
		<hr />
		<button onmousedown="btnActhion([0x90,60,100])" onmouseup="btnActhion([0x80,60,0])">発音 C</button>
		<p id="status"></p>
	</div>

	<!-- WebRTCを用いた、SkyWayの外部サービス -->
	<!-- <div class="container" style="visibility: hidden;"> -->
	<div class="container">
		<div class="room">
			<div>
				<!-- <video id="js-local-stream"></video> -->
				<span id="js-room-mode"></span>:
				<input type="text" placeholder="Room Name" id="js-room-id">
				<button id="js-join-trigger">Join</button>
				<button id="js-leave-trigger">Leave</button>
			</div>
			<div>
				<pre class="messages" id="js-messages"></pre>
				<input type="text" id="js-local-text">
				<button id="js-send-trigger">Send</button>
			</div>
			<div class="remote-streams" id="js-remote-streams"></div>
		</div>
		<p class="meta" id="js-meta"></p>
	</div>
	<script src="//cdn.webrtc.ecl.ntt.com/skyway-4.4.3.js"></script>
	<script type="text/javascript" src="inc/skyway_p2p.js"></script>
</body>

</html>